(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,c){},70:function(e,t,c){},75:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c(1),a=c.n(n),s=c(22),i=c.n(s),o=(c(45),c(6)),u=c(3),j=c.n(u),d=c(5),l=c(2),b=c(4),p=c.n(b);var h=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(),s=Object(l.a)(a,2),i=s[0],o=s[1],u=Object(n.useState)(""),b=Object(l.a)(u,2),h=b[0],O=b[1],x=Object(n.useState)(""),f=Object(l.a)(x,2),m=f[0],v=f[1],g=Object(n.useState)(""),y=Object(l.a)(g,2),k=y[0],w=y[1],C=Object(n.useState)(1),A=Object(l.a)(C,2),_=A[0],S=A[1],P=Object(n.useState)(0),N=Object(l.a)(P,2),I=N[0],q=N[1];return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/products?limit=".concat(9*_,"&").concat(h,"&").concat(m,"&title[regex]=").concat(k));case 2:t=e.sent,r(t.data.products),q(t.data.result);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i,h,_,k,m]),{products:[c,r],callback:[i,o],category:[h,O],sort:[m,v],search:[k,w],page:[_,S],result:[I,q]}},O=c(8),x=c(14);var f=function(e){var t=Object(n.useState)(!1),c=Object(l.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1],b=Object(n.useState)([]),h=Object(l.a)(b,2),f=h[0],m=h[1],v=Object(n.useState)([]),g=Object(l.a)(v,2),y=g[0],k=g[1];Object(n.useEffect)((function(){e&&function(){var t=Object(d.a)(j.a.mark((function t(){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.get("/user/infor",{headers:{Authorization:e}});case 3:c=t.sent,a(!0),1===c.data.role?u(!0):u(!1),m(c.data.cart),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert(t.t0.response.data.msg);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var w=function(){var t=Object(d.a)(j.a.mark((function t(c){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",alert("Veuillez vous connecter pour continuer vos achats"));case 2:if(!f.every((function(e){return e._id!==c._id}))){t.next=9;break}return m([].concat(Object(x.a)(f),[Object(O.a)(Object(O.a)({},c),{},{quantity:1})])),t.next=7,p.a.patch("/user/addcart",{cart:[].concat(Object(x.a)(f),[Object(O.a)(Object(O.a)({},c),{},{quantity:1})])},{headers:{Authorization:e}});case 7:t.next=10;break;case 9:alert("Ce produit a \xe9t\xe9 ajout\xe9 au panier.");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{isLogged:[r,a],isAdmin:[o,u],cart:[f,m],addCart:w,history:[y,k]}};function m(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),s=Object(l.a)(a,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/category");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]),{categories:[c,r],callback:[i,o]}}var v=Object(n.createContext)(),g=function(e){var t=e.children,c=Object(n.useState)(!1),a=Object(l.a)(c,2),s=a[0],i=a[1];Object(n.useEffect)((function(){if(localStorage.getItem("firstLogin")){var e=function(){var t=Object(d.a)(j.a.mark((function t(){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("/user/refresh_token");case 2:c=t.sent,i(c.data.accesstoken),setTimeout((function(){e()}),6e5);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()}}),[]);var o={token:[s,i],productsAPI:h(),userAPI:f(s),categoriesAPI:m()};return Object(r.jsx)(v.Provider,{value:o,children:t})},y=c.p+"static/media/menu.e8db7520.svg",k=c.p+"static/media/close.ea7c95d7.svg",w=c.p+"static/media/cart.d146d6c3.svg";function C(){var e=Object(n.useContext)(v),t=Object(l.a)(e.userAPI.isLogged,1)[0],c=Object(l.a)(e.userAPI.isAdmin,1)[0],a=Object(l.a)(e.userAPI.cart,1)[0],s=Object(n.useState)(!1),i=Object(l.a)(s,2),u=i[0],b=i[1],h=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/user/logout");case 2:localStorage.removeItem("firstLogin"),window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O={left:u?0:"-100%"};return Object(r.jsxs)("header",{children:[Object(r.jsx)("div",{className:"menu",onClick:function(){return b(!u)},children:Object(r.jsx)("img",{src:y,alt:"",width:"30"})}),Object(r.jsx)("div",{className:"logo",children:Object(r.jsx)("h1",{children:Object(r.jsxs)(o.b,{to:"/",children:[" ",c?"Admin":"UPEP Scoop Solidaire"]})})}),Object(r.jsxs)("ul",{style:O,children:[Object(r.jsx)("li",{children:Object(r.jsx)(o.b,{to:"/",children:c?"Home":"Boutique"})}),c&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("li",{children:Object(r.jsx)(o.b,{to:"/create_product",children:"Cr\xe9er un produit"})}),Object(r.jsx)("li",{children:Object(r.jsx)(o.b,{to:"/category",children:"Categories"})})]}),t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("li",{children:Object(r.jsx)(o.b,{to:"/history",children:"Historique"})}),Object(r.jsx)("li",{children:Object(r.jsx)(o.b,{to:"/",onClick:h,children:"Se d\xe9connecter"})})]}):Object(r.jsx)("li",{children:Object(r.jsx)(o.b,{to:"/login",children:"Se Connecter \u2725 S'inscrire"})}),Object(r.jsx)("li",{onClick:function(){return b(!u)},children:Object(r.jsx)("img",{src:k,alt:"",width:"30",className:"menu"})})]}),c?"":Object(r.jsxs)("div",{className:"cart-icon",children:[Object(r.jsx)("span",{children:a.length}),Object(r.jsx)(o.b,{to:"/cart",children:Object(r.jsx)("img",{src:w,alt:"",width:"30"})})]})]})}var A=c(7);var _=function(e){var t=e.product,c=e.deleteProduct,a=Object(n.useContext)(v),s=Object(l.a)(a.userAPI.isAdmin,1)[0],i=a.userAPI.addCart;return Object(r.jsx)("div",{className:"row_btn",children:s?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(o.b,{id:"btn_buy",to:"#!",onClick:function(){return c(t._id,t.images.public_id)},children:"Supprimer"}),Object(r.jsx)(o.b,{id:"btn_view",to:"/edit_product/".concat(t._id),children:"Editer"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(o.b,{id:"btn_buy",to:"#!",onClick:function(){return i(t)},children:"Acheter"}),Object(r.jsx)(o.b,{id:"btn_view",to:"/detail/".concat(t._id),children:"voir"})]})})};var S=function(e){var t=e.product,c=e.isAdmin,n=e.deleteProduct,a=e.handleCheck;return Object(r.jsxs)("div",{className:"product_card",children:[c&&Object(r.jsx)("input",{type:"checkbox",checked:t.checked,onChange:function(){return a(t._id)}}),Object(r.jsx)("img",{src:t.images.url,alt:""}),Object(r.jsxs)("div",{className:"product_box",children:[Object(r.jsx)("h2",{title:t.title,children:t.title}),Object(r.jsxs)("span",{children:["\u20ac",t.price]}),Object(r.jsx)("p",{children:t.description})]}),Object(r.jsx)(_,{product:t,deleteProduct:n})]})};c(70);var P=function(){return Object(r.jsx)("div",{className:"load-page",children:Object(r.jsx)("div",{className:"loader",children:Object(r.jsx)("div",{children:Object(r.jsx)("div",{children:Object(r.jsx)("div",{children:Object(r.jsx)("div",{children:Object(r.jsx)("div",{children:Object(r.jsx)("div",{children:Object(r.jsx)("div",{children:Object(r.jsx)("div",{})})})})})})})})})})};function N(){var e=Object(n.useContext)(v),t=Object(l.a)(e.categoriesAPI.categories,1)[0],c=Object(l.a)(e.productsAPI.category,2),a=c[0],s=c[1],i=Object(l.a)(e.productsAPI.sort,2),o=i[0],u=i[1],j=Object(l.a)(e.productsAPI.search,2),d=j[0],b=j[1];return Object(r.jsxs)("div",{className:"filter_menu",children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("span",{children:"Filtres:"}),Object(r.jsxs)("select",{name:"category",value:a,onChange:function(e){s(e.target.value),b("")},children:[Object(r.jsx)("option",{value:"",children:"Tous les Produits"}),t.map((function(e){return Object(r.jsx)("option",{value:"category="+e._id,children:e.name},e._id)}))]})]}),Object(r.jsx)("input",{type:"text",value:d,placeholder:"Entrer votre recherche!",onChange:function(e){return b(e.target.value.toLowerCase())}}),Object(r.jsxs)("div",{className:"row sort",children:[Object(r.jsx)("span",{children:"Trier par:"}),Object(r.jsxs)("select",{value:o,onChange:function(e){return u(e.target.value)},children:[Object(r.jsx)("option",{value:"",children:"Le plus r\xe9cent"}),Object(r.jsx)("option",{value:"sort=oldest",children:"Le plus ancien"}),Object(r.jsx)("option",{value:"sort=-sold",children:"Les meilleures ventes"}),Object(r.jsx)("option",{value:"sort=-price",children:"Prix:Le plus-bas"}),Object(r.jsx)("option",{value:"sort=price",children:"Prix:Le plus-haut"})]})]})]})}function I(){var e=Object(n.useContext)(v),t=Object(l.a)(e.productsAPI.page,2),c=t[0],a=t[1],s=Object(l.a)(e.productsAPI.result,1)[0];return Object(r.jsx)("div",{className:"load_more",children:s<9*c?"":Object(r.jsx)("button",{onClick:function(){return a(c+1)},children:"Charger plus"})})}var q=function(){var e=Object(n.useContext)(v),t=Object(l.a)(e.productsAPI.products,2),c=t[0],a=t[1],s=Object(l.a)(e.userAPI.isAdmin,1)[0],i=Object(l.a)(e.token,1)[0],o=Object(l.a)(e.productsAPI.callback,2),u=o[0],b=o[1],h=Object(n.useState)(!1),O=Object(l.a)(h,2),f=O[0],m=O[1],g=Object(n.useState)(!1),y=Object(l.a)(g,2),k=y[0],w=y[1],C=function(e){c.forEach((function(t){t._id===e&&(t.checked=!t.checked)})),a(Object(x.a)(c))},A=function(){var e=Object(d.a)(j.a.mark((function e(t,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,p.a.post("/api/destroy",{public_id:c},{headers:{Authorization:i}});case 4:return e.sent,e.next=7,p.a.delete("/api/products/".concat(t),{headers:{Authorization:i}});case 7:e.sent,b(!u),m(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,c){return e.apply(this,arguments)}}();return f?Object(r.jsx)("div",{children:Object(r.jsx)(P,{})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(N,{}),s&&Object(r.jsxs)("div",{className:"delete-all",children:[Object(r.jsx)("span",{children:"Tout s\xe9l\xe9ctionner"}),Object(r.jsx)("input",{type:"checkbox",checked:k,onChange:function(){c.forEach((function(e){e.checked=!k})),a(Object(x.a)(c)),w(!k)}}),Object(r.jsx)("button",{onClick:function(){c.forEach((function(e){e.checked&&A(e._id,e.images.public_id)}))},children:"Tout supprimer"})]}),Object(r.jsx)("div",{className:"products",children:c.map((function(e){return Object(r.jsx)(S,{product:e,isAdmin:s,deleteProduct:A,handleCheck:C},e._id)}))}),Object(r.jsx)(I,{}),0===c.length&&Object(r.jsx)(P,{})]})};var E=function(){var e=Object(A.g)(),t=Object(n.useContext)(v),c=Object(l.a)(t.productsAPI.products,1)[0],a=t.userAPI.addCart,s=Object(n.useState)([]),i=Object(l.a)(s,2),u=i[0],j=i[1];return Object(n.useEffect)((function(){console.log("re render"),e.id&&c.forEach((function(t){t._id===e.id&&j(t)}))}),[e.id,c]),0===u.length?null:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"detail",children:[Object(r.jsx)("img",{src:u.images.url,alt:""}),Object(r.jsxs)("div",{className:"box-detail",children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("h2",{children:u.title}),Object(r.jsxs)("h6",{children:["#id:",u.product_id]})]}),Object(r.jsxs)("span",{children:["\u20ac ",u.price]}),Object(r.jsx)("p",{children:u.description}),Object(r.jsx)("p",{children:u.content}),Object(r.jsxs)("p",{children:["Vente: ",u.sold]}),Object(r.jsx)(o.b,{to:"/cart",className:"cart",onClick:function(){return a(u)},children:"Acheter maintenant"})]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Produits associ\xe9s"}),Object(r.jsx)("div",{className:"products",children:c.map((function(e){return e.category===u.category?Object(r.jsx)(S,{product:e},e._id):null}))})]})]})},z=c(15);var D=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(l.a)(e,2),c=t[0],a=t[1],s=function(e){var t=e.target,r=t.name,n=t.value;a(Object(O.a)(Object(O.a)({},c),{},Object(z.a)({},r,n)))},i=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.a.post("/user/login",Object(O.a)({},c));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"login-page",children:Object(r.jsxs)("form",{onSubmit:i,children:[Object(r.jsx)("h2",{children:"Connexion"}),Object(r.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:c.email,onChange:s}),Object(r.jsx)("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Mot de passe",value:c.password,onChange:s}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("button",{type:"submit",children:"Connexion"}),Object(r.jsx)(o.b,{to:"/register",children:"S'inscrire"})]})]})})};var F=function(){var e=Object(n.useState)({name:"",email:"",password:""}),t=Object(l.a)(e,2),c=t[0],a=t[1],s=function(e){var t=e.target,r=t.name,n=t.value;a(Object(O.a)(Object(O.a)({},c),{},Object(z.a)({},r,n)))},i=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.a.post("/user/register",Object(O.a)({},c));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"login-page",children:Object(r.jsxs)("form",{onSubmit:i,children:[Object(r.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"Name",value:c.name,onChange:s}),Object(r.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:c.email,onChange:s}),Object(r.jsx)("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:c.password,onChange:s}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("button",{type:"submit",children:"Register"}),Object(r.jsx)(o.b,{to:"/login",children:"Login"})]})]})})},L=c(35),T=c(36),U=c(39),V=c(38),X=c(37),B=c.n(X),H=function(e){Object(U.a)(c,e);var t=Object(V.a)(c);function c(){return Object(L.a)(this,c),t.apply(this,arguments)}return Object(T.a)(c,[{key:"render",value:function(){var e=this,t=this.props.total;return Object(r.jsx)(B.a,{env:"sandbox",client:{sandbox:"AR9gyuAV_YbUvaTQQUFjixTStZXh0A53kNHBKSOgIKakcqWzzFGPMkCpZqyWblqP6Crbl3g2YDtVuqX-",production:"YOUR-PRODUCTION-APP-ID"},currency:"USD",total:t,onError:function(e){console.log("Error!",e)},onSuccess:function(t){console.log("The payment was succeeded!",t),e.props.tranSuccess(t)},onCancel:function(e){console.log("The payment was cancelled!",e)},style:{size:"small",color:"blue",shape:"rect",label:"checkout",tagline:!1}})}}]),c}(a.a.Component);var R=function(){var e=Object(n.useContext)(v),t=Object(l.a)(e.userAPI.cart,2),c=t[0],a=t[1],s=Object(n.useState)(0),i=Object(l.a)(s,2),o=i[0],u=i[1],b=Object(l.a)(e.token,1)[0];Object(n.useEffect)((function(){!function(){var e=c.reduce((function(e,t){return e+t.price*t.quantity}),0);u(e)}()}),[c]);var h=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.patch("/user/addcart",{cart:t},{headers:{Authorization:b}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.paymentID,n=t.address,e.next=3,p.a.post("/api/payment",{cart:c,paymentID:r,address:n},{headers:{Authorization:b}});case 3:a([]),h([]),alert("Vous avez pass\xe9 une commande avec succ\xe8s.");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return 0===c.length?Object(r.jsx)("h2",{style:{textAlign:"center",fontSize:"5rem"},children:"panier vide"}):Object(r.jsxs)("div",{children:[c.map((function(e){return Object(r.jsxs)("div",{className:"detail cart",children:[Object(r.jsx)("img",{src:e.images.url,alt:""}),Object(r.jsxs)("div",{className:"box-detail",children:[Object(r.jsx)("h2",{children:e.title}),Object(r.jsxs)("h3",{children:["\u20ac ",e.price*e.quantity]}),Object(r.jsx)("p",{children:e.description}),Object(r.jsx)("p",{children:e.content}),Object(r.jsxs)("p",{children:["vente: ",e.sold]}),Object(r.jsxs)("div",{className:"amount",children:[Object(r.jsx)("button",{onClick:function(){return t=e._id,c.forEach((function(e){e._id===t&&(1===e.quantity?e.quantity=1:e.quantity-=1)})),a(Object(x.a)(c)),void h(c);var t},children:" - "}),Object(r.jsx)("span",{children:e.quantity}),Object(r.jsx)("button",{onClick:function(){return t=e._id,c.forEach((function(e){e._id===t&&(e.quantity+=1)})),a(Object(x.a)(c)),void h(c);var t},children:" + "})]}),Object(r.jsx)("div",{className:"delete",onClick:function(){return t=e._id,void(window.confirm("Voulez-vous supprimer ce produit?")&&(c.forEach((function(e,r){e._id===t&&c.splice(r,1)})),a(Object(x.a)(c)),h(c)));var t},children:"X"})]})]},e._id)})),Object(r.jsxs)("div",{className:"total",children:[Object(r.jsxs)("h3",{children:["Total: \u20ac ",o," "]}),Object(r.jsx)(H,{total:o,tranSuccess:O})]})]})};var J=function(){return Object(r.jsx)("div",{children:"404 | Not Found"})};var M=function(){var e=Object(n.useContext)(v),t=Object(l.a)(e.userAPI.history,2),c=t[0],a=t[1],s=Object(l.a)(e.userAPI.isAdmin,1)[0],i=Object(l.a)(e.token,1)[0];return Object(n.useEffect)((function(){i&&function(){var e=Object(d.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,p.a.get("/api/payment",{headers:{Authorization:i}});case 3:t=e.sent,a(t.data),e.next=11;break;case 7:return e.next=9,p.a.get("/user/history",{headers:{Authorization:i}});case 9:c=e.sent,a(c.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[i,s,a]),Object(r.jsxs)("div",{className:"history-page",children:[Object(r.jsx)("h2",{children:"History"}),Object(r.jsxs)("h4",{children:["Vous avez command\xe9 ",c.length]}),Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Payment ID"}),Object(r.jsx)("th",{children:"Date d'achat"})]})}),Object(r.jsx)("tbody",{children:c.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.paymentID}),Object(r.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),Object(r.jsx)("td",{children:Object(r.jsx)(o.b,{to:"/history/".concat(e._id),children:"Voir"})})]},e._id)}))})]})]})};function Q(){var e=Object(n.useContext)(v),t=Object(l.a)(e.userAPI.history,1)[0],c=Object(n.useState)([]),a=Object(l.a)(c,2),s=a[0],i=a[1],o=Object(A.g)();return Object(n.useEffect)((function(){o.id&&t.forEach((function(e){e._id===o.id&&i(e)}))}),[o.id,t]),console.log(s),0===s.length?null:Object(r.jsxs)("div",{className:"history-page",children:[Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Name"}),Object(r.jsx)("th",{children:"Address"}),Object(r.jsx)("th",{children:"Postal Code"}),Object(r.jsx)("th",{children:"Country Code"})]})}),Object(r.jsx)("tbody",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:s.address.recipient_name}),Object(r.jsx)("td",{children:s.address.line1+" - "+s.address.city}),Object(r.jsx)("td",{children:s.address.postal_code}),Object(r.jsx)("td",{children:s.address.country_code})]})})]}),Object(r.jsxs)("table",{style:{margin:"30px 0px"},children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{}),Object(r.jsx)("th",{children:"Products"}),Object(r.jsx)("th",{children:"Quantity"}),Object(r.jsx)("th",{children:"Price"})]})}),Object(r.jsx)("tbody",{children:s.cart.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:Object(r.jsx)("img",{src:e.images.url,alt:""})}),Object(r.jsx)("td",{children:e.title}),Object(r.jsx)("td",{children:e.quantity}),Object(r.jsxs)("td",{children:["\u20ac ",e.price*e.quantity]})]},e._id)}))})]})]})}function W(){var e=Object(n.useContext)(v),t=Object(l.a)(e.categoriesAPI.categories,1)[0],c=Object(n.useState)(""),a=Object(l.a)(c,2),s=a[0],i=a[1],o=Object(l.a)(e.token,1)[0],u=Object(l.a)(e.categoriesAPI.callback,2),b=u[0],h=u[1],O=Object(n.useState)(!1),x=Object(l.a)(O,2),f=x[0],m=x[1],g=Object(n.useState)(""),y=Object(l.a)(g,2),k=y[0],w=y[1],C=function(){var e=Object(d.a)(j.a.mark((function e(t){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!f){e.next=9;break}return e.next=5,p.a.put("/api/category/".concat(k),{name:s},{headers:{Authorization:o}});case 5:c=e.sent,alert(c.data.msg),e.next=13;break;case 9:return e.next=11,p.a.post("/api/category/",{name:s},{headers:{Authorization:o}});case 11:r=e.sent,alert(r.data.msg);case 13:m(!1),h(!b),i(""),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(j.a.mark((function e(t,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(t),i(c),m(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete("/api/category/".concat(t),{headers:{Authorization:o}});case 3:c=e.sent,alert(c.data.msg),h(!b),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.msg);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"categories",children:[Object(r.jsxs)("form",{onSubmit:C,children:[Object(r.jsx)("label",{htmlFor:"category",children:"Cat\xe9gorie"}),Object(r.jsx)("input",{type:"text",name:"category",value:s,required:!0,onChange:function(e){return i(e.target.value)}}),Object(r.jsx)("button",{type:"submit",children:f?"Mettre \xe0 jour":"Cr\xe9er"})]}),Object(r.jsx)("div",{className:"col",children:t.map((function(e){return Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("p",{children:e.name}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:function(){return A(e._id,e.name)},children:"Editer"}),Object(r.jsx)("button",{onClick:function(){return _(e._id)},children:"Supprimer"})]})]},e._id)}))})]})}var Y={product_id:"",title:"",price:0,description:"Effet CSS sympa, id\xe9es de conception Web, biblioth\xe8ques JavaScript, Nodejs",content:"Bienvenue sur notre site UPEP Scoop Solidaire, la conception UI / UX, les animations css et les effets css.",category:"",id:""};function G(){var e=Object(n.useContext)(v),t=Object(n.useState)(Y),c=Object(l.a)(t,2),a=c[0],s=c[1],i=Object(l.a)(e.categoriesAPI.categories,1)[0],o=Object(n.useState)(!1),u=Object(l.a)(o,2),b=u[0],h=u[1],x=Object(n.useState)(!1),f=Object(l.a)(x,2),m=f[0],g=f[1],y=Object(l.a)(e.userAPI.isAdmin,1)[0],k=Object(l.a)(e.token,1)[0],w=Object(A.f)(),C=Object(A.g)(),_=Object(l.a)(e.productsAPI.products,1)[0],S=Object(n.useState)(!1),N=Object(l.a)(S,2),I=N[0],q=N[1],E=Object(l.a)(e.productsAPI.callback,2),D=E[0],F=E[1];Object(n.useEffect)((function(){C.id?(q(!0),_.forEach((function(e){e._id===C.id&&(s(e),h(e.images))}))):(s(Y),h(!1),q(!1))}),[C.id,_]);var L=function(){var e=Object(d.a)(j.a.mark((function e(t){var c,r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,y){e.next=4;break}return e.abrupt("return",alert("vous n'\xeates pas un Admin"));case 4:if(c=t.target.files[0]){e.next=7;break}return e.abrupt("return",alert("Le fichier n'existe pas."));case 7:if(!(c.size>1048576)){e.next=9;break}return e.abrupt("return",alert("Le fichier ne doit pas d\xe9passer 1G!"));case 9:if("image/jpeg"===c.type||"image/png"===c.type){e.next=11;break}return e.abrupt("return",alert("Le format du fichier est incorrect."));case 11:return(r=new FormData).append("file",c),g(!0),e.next=16,p.a.post("/api/upload",r,{headers:{"content-type":"multipart/form-data",Authorization:k}});case 16:n=e.sent,g(!1),h(n.data),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y){e.next=3;break}return e.abrupt("return",alert("vous n'\xeates pas un Admin"));case 3:return g(!0),e.next=6,p.a.post("/api/destroy",{public_id:b.public_id},{headers:{Authorization:k}});case 6:g(!1),h(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=e.target,c=t.name,r=t.value;s(Object(O.a)(Object(O.a)({},a),{},Object(z.a)({},c,r)))},V=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,y){e.next=4;break}return e.abrupt("return",alert("vous n'\xeates pas un Admin"));case 4:if(b){e.next=6;break}return e.abrupt("return",alert("Image non charg\xe9e"));case 6:if(!I){e.next=11;break}return e.next=9,p.a.put("/api/products/".concat(a._id),Object(O.a)(Object(O.a)({},a),{},{images:b}),{headers:{Authorization:k}});case 9:e.next=13;break;case 11:return e.next=13,p.a.post("/api/products",Object(O.a)(Object(O.a)({},a),{},{images:b}),{headers:{Authorization:k}});case 13:s(Y),w.push("/"),F(!D),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),X={display:b?"block":"none"};return Object(r.jsxs)("div",{className:"create_product",children:[Object(r.jsxs)("div",{className:"upload",children:[Object(r.jsx)("input",{type:"file",name:"file",id:"file_up",onChange:L}),m?Object(r.jsx)("div",{id:"file_img",children:Object(r.jsx)(P,{})}):Object(r.jsxs)("div",{id:"file_img",style:X,children:[Object(r.jsx)("img",{src:b?b.url:"",alt:""}),Object(r.jsx)("span",{onClick:T,children:"X"})]})]}),Object(r.jsxs)("form",{onSubmit:V,children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("label",{htmlFor:"product_id",children:"Product ID"}),Object(r.jsx)("input",{type:"text",name:"product_id",id:"product_id",required:!0,value:a.product_id,onChange:U,disabled:I})]}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("label",{htmlFor:"title",children:"Titre"}),Object(r.jsx)("input",{type:"text",name:"title",id:"title",required:!0,value:a.title,onChange:U})]}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("label",{htmlFor:"price",children:"Prix"}),Object(r.jsx)("input",{type:"number",name:"price",id:"price",required:!0,value:a.price,onChange:U})]}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("label",{htmlFor:"description",children:"Description"}),Object(r.jsx)("textarea",{type:"text",name:"description",id:"description",required:!0,value:a.description,rows:"5",onChange:U})]}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("label",{htmlFor:"content",children:"A propos"}),Object(r.jsx)("textarea",{type:"text",name:"content",id:"content",required:!0,value:a.content,rows:"7",onChange:U})]}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("label",{htmlFor:"categories",children:"Categories:"}),Object(r.jsxs)("select",{name:"category",value:a.category,onChange:U,children:[Object(r.jsx)("option",{value:"",children:"Veuillez s\xe9lectionner une cat\xe9gorie"}),i.map((function(e){return Object(r.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),Object(r.jsx)("button",{type:"submit",children:"Cr\xe9er "})]})]})}var K=function(){var e=Object(n.useContext)(v),t=Object(l.a)(e.userAPI.isLogged,1)[0],c=Object(l.a)(e.userAPI.isAdmin,1)[0];return Object(r.jsx)("div",{children:Object(r.jsxs)(A.c,{children:[Object(r.jsx)(A.a,{path:"/",exact:!0,component:q}),Object(r.jsx)(A.a,{path:"/detail/:id",exact:!0,component:E}),Object(r.jsx)(A.a,{path:"/login",exact:!0,component:t?J:D}),Object(r.jsx)(A.a,{path:"/register",exact:!0,component:t?J:F}),Object(r.jsx)(A.a,{path:"/cart",exact:!0,component:R}),Object(r.jsx)(A.a,{path:"/history",exact:!0,component:t?M:J}),Object(r.jsx)(A.a,{path:"/history/:id",exact:!0,component:t?Q:J}),Object(r.jsx)(A.a,{path:"/category",exact:!0,component:c?W:J}),Object(r.jsx)(A.a,{path:"/create_product",exact:!0,component:c?G:J}),Object(r.jsx)(A.a,{path:"/edit_product/:id",exact:!0,component:c?G:J}),Object(r.jsx)(A.a,{path:"*",exact:!0,component:J})]})})};var Z=function(){return Object(r.jsx)(g,{children:Object(r.jsx)(o.a,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(C,{}),Object(r.jsx)(K,{})]})})})};i.a.render(Object(r.jsx)(Z,{}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.0c5dbcc9.chunk.js.map