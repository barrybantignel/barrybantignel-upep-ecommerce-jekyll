{"version":3,"sources":["api/ProductsAPI.js","api/UserAPI.js","api/CategoriesAPI.js","GlobalState.js","components/headers/icon/menu.svg","components/headers/icon/close.svg","components/headers/icon/cart.svg","components/headers/Header.js","components/mainpages/utils/productItem/BtnRender.js","components/mainpages/utils/productItem/ProductItem.js","components/mainpages/utils/loading/Loading.js","components/mainpages/products/Filters.js","components/mainpages/products/LoadMore.js","components/mainpages/products/Products.js","components/mainpages/detailProduct/DetailProduct.js","components/mainpages/auth/Login.js","components/mainpages/auth/Register.js","components/mainpages/cart/PaypalButton.js","components/mainpages/cart/Cart.js","components/mainpages/utils/not_found/NotFound.js","components/mainpages/history/OrderHistory.js","components/mainpages/history/OrderDetails.js","components/mainpages/categories/Categories.js","components/mainpages/createProduct/CreateProduct.js","components/mainpages/Pages.js","App.js","index.js"],"names":["ProductsAPI","useState","products","setProducts","callback","setCallback","category","setCategory","sort","setSort","search","setSearch","page","setPage","result","setResult","useEffect","a","axios","get","res","data","getProducts","UserAPI","token","isLogged","setIsLogged","isAdmin","setIsAdmin","cart","setCart","history","setHistory","headers","Authorization","role","alert","response","msg","getUser","addCart","product","every","item","_id","quantity","patch","CategoriesAPI","categories","setCategories","getCategories","GlobalState","createContext","DataProvider","children","setToken","localStorage","getItem","refreshToken","accesstoken","setTimeout","state","productsAPI","userAPI","categoriesAPI","Provider","value","Header","useContext","menu","setMenu","logoutUser","removeItem","window","location","href","styleMenu","left","className","onClick","src","Menu","alt","width","to","style","Close","length","Cart","BtnRender","deleteProduct","id","images","public_id","ProductItem","handleCheck","type","checked","onChange","url","title","price","description","Loading","Filters","name","e","target","map","placeholder","toLowerCase","LoadMore","Products","loading","setLoading","isCheck","setIsCheck","forEach","post","delete","DetailProduct","params","useParams","detailProduct","setDetailProduct","console","log","product_id","content","sold","Login","email","password","user","setUser","onChangeInput","loginSubmit","preventDefault","setItem","onSubmit","required","autoComplete","Register","registerSubmit","PaypalButton","total","this","props","env","client","sandbox","production","currency","onError","err","onSuccess","payment","tranSuccess","onCancel","size","color","shape","label","tagline","React","Component","setTotal","reduce","prev","getTotal","addToCart","paymentID","address","textAlign","fontSize","confirm","index","splice","NotFound","OrderHistory","getHistory","items","Date","createdAt","toLocaleDateString","OrderDetails","orderDetails","setOrderDetails","recipient_name","line1","city","postal_code","country_code","margin","Categories","onEdit","setOnEdit","setID","createCategory","put","editCategory","deleteCategory","htmlFor","initialState","CreateProduct","setProduct","setImages","useHistory","param","handleUpload","file","files","formData","FormData","append","handleDestroy","handleChangeInput","handleSubmit","push","styleUpload","display","disabled","rows","Pages","path","exact","component","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0c5dbcc9.chunk.js","sourcesContent":["import React, { useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\n\r\n\r\nfunction ProductsAPI() {\r\n    const [products, setProducts] = useState([])\r\n    const [callback, setCallback] = useState()\r\n    const [category, setCategory] = useState('')\r\n    const [sort, setSort] = useState('')\r\n    const [search, setSearch] = useState('')\r\n    const [page, setPage] = useState(1)\r\n    const [result, setResult] = useState(0)\r\n\r\n    \r\n    useEffect(() => {\r\n        const getProducts = async() => {\r\n            const res = await axios.get(`/api/products?limit=${page*9}&${category}&${sort}&title[regex]=${search}`)\r\n            //console.log(res)\r\n            //console.log(res.data.products)\r\n            setProducts(res.data.products)\r\n            //console.log(res)\r\n            setResult(res.data.result)\r\n        }          \r\n        getProducts()\r\n    }, [callback, category, page, search, sort])  \r\n\r\n        return  {\r\n            products : [products, setProducts],\r\n            callback: [callback, setCallback],\r\n            category: [category, setCategory],\r\n            sort: [sort, setSort],\r\n            search: [search, setSearch],\r\n            page: [page, setPage],\r\n            result: [result, setResult]\r\n        }\r\n    }\r\n\r\nexport default ProductsAPI\r\n","import React, {useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction UserAPI(token) {\r\n\r\n    const [isLogged, setIsLogged] = useState(false)\r\n    const [isAdmin, setIsAdmin] = useState(false)\r\n    const [cart, setCart] = useState([])\r\n    const [history, setHistory] = useState([])\r\n\r\n    useEffect(() => {\r\n        if(token) {\r\n            const getUser = async() => {\r\n                try {\r\n                    const res = await axios.get('/user/infor', {\r\n                        headers: {Authorization: token}\r\n                    })\r\n\r\n                    setIsLogged(true)\r\n                    res.data.role === 1 ? setIsAdmin(true) : setIsAdmin(false)\r\n                    //console.log(res)\r\n                    setCart(res.data.cart)\r\n\r\n                } catch (err) {\r\n                    alert(err.response.data.msg)\r\n                }\r\n            }\r\n\r\n            getUser()\r\n        }        \r\n    }, [token])\r\n/*\r\n     useEffect(() =>{\r\n        if(token){\r\n            const getHistory = async () =>{ \r\n                if(isAdmin){               \r\n                    const res = await axios.get('/api/payment', {\r\n                        headers: {Authorization: token}\r\n                    })\r\n                    //console.log(res)\r\n                    setHistory(res.data)               \r\n            } else {\r\n                const res = await axios.get('/user/history', {\r\n                    headers: {Authorization: token}\r\n                })\r\n                setHistory(res.data)\r\n            }\r\n        }\r\n            getHistory()   \r\n        }\r\n    },[token, isAdmin])  \r\n*/\r\n\r\n    const addCart = async (product) => {\r\n        if(!isLogged) return alert(\"Veuillez vous connecter pour continuer vos achats\")\r\n\r\n        const check = cart.every(item =>{\r\n            return item._id !== product._id\r\n        })\r\n\r\n        if(check){\r\n            setCart([...cart, {...product, quantity: 1}])\r\n\r\n             await axios.patch('/user/addcart', {cart: [...cart, {...product, quantity: 1}]}, {\r\n                headers: {Authorization: token}\r\n            }) \r\n\r\n\r\n        }else{\r\n            alert(\"Ce produit a été ajouté au panier.\")\r\n        }\r\n    }\r\n\r\n    return (\r\n       {\r\n        isLogged: [isLogged, setIsLogged],\r\n        isAdmin: [isAdmin, setIsAdmin],\r\n        cart: [cart, setCart],\r\n        addCart: addCart,\r\n        history: [history, setHistory],\r\n       \r\n       }\r\n    )\r\n}\r\n\r\nexport default UserAPI\r\n","import React, {useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function CategoriesAPI() {\r\n    const [categories, setCategories] = useState([])\r\n    const [callback, setCallback] = useState(false)\r\n\r\n    useEffect(() => {\r\n        const getCategories = async () => {\r\n            const res = await axios.get('/api/category')\r\n            //console.log(res)\r\n            setCategories(res.data)\r\n        }\r\n            getCategories()\r\n    }, [callback])\r\n\r\n    return (\r\n        {\r\n            categories: [categories, setCategories],\r\n            callback: [callback, setCallback]  \r\n        }\r\n    )\r\n}\r\n","import React, {createContext, useState, useEffect} from 'react';\r\nimport ProductsAPI from './api/ProductsAPI';\r\nimport axios from 'axios';\r\nimport UserAPI from './api/UserAPI';\r\nimport CategoriesAPI from './api/CategoriesAPI';\r\n\r\n\r\nexport const GlobalState = createContext()\r\n\r\nexport const DataProvider = ({children}) =>{\r\n\r\n    const [token, setToken] = useState(false)   \r\n\r\n    useEffect(() =>{\r\n        const firstLogin = localStorage.getItem('firstLogin')\r\n        if(firstLogin){\r\n            const refreshToken = async () =>{\r\n                const res = await axios.get('/user/refresh_token')\r\n        \r\n                setToken(res.data.accesstoken)\r\n    \r\n                setTimeout(() => {\r\n                    refreshToken()\r\n                }, 10 * 60 * 1000)\r\n            }\r\n            refreshToken()\r\n        }\r\n    },[])\r\n\r\n    const state = {\r\n        token: [token, setToken],\r\n        productsAPI: ProductsAPI(),\r\n        userAPI: UserAPI(token),\r\n        categoriesAPI: CategoriesAPI()    \r\n    }\r\n\r\n    return (\r\n        <GlobalState.Provider value = {state}>\r\n            {children}\r\n        </GlobalState.Provider>\r\n    )\r\n}","export default __webpack_public_path__ + \"static/media/menu.e8db7520.svg\";","export default __webpack_public_path__ + \"static/media/close.ea7c95d7.svg\";","export default __webpack_public_path__ + \"static/media/cart.d146d6c3.svg\";","import React, {useContext, useState} from 'react';\r\nimport {GlobalState} from '../../GlobalState';\r\nimport Menu from './icon/menu.svg';\r\nimport Close from './icon/close.svg';\r\nimport Cart from './icon/cart.svg';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nexport default function Header() {\r\n\r\n    // donner la value=state\r\n    const state = useContext(GlobalState)\r\n    //console.log(state)    \r\n    const [isLogged] = state.userAPI.isLogged\r\n    const [isAdmin] = state.userAPI.isAdmin\r\n    const [cart] = state.userAPI.cart\r\n    const [menu, setMenu] = useState(false)\r\n   \r\n    const logoutUser = async () => {\r\n        await axios.get('/user/logout')\r\n        //localStorage.clear()\r\n        localStorage.removeItem('firstLogin')\r\n        window.location.href = \"/\";\r\n    }\r\n    \r\n    const adminRouter = () => {\r\n        return(\r\n            <>\r\n               <li><Link to=\"/create_product\">Créer un produit</Link></li>\r\n               <li><Link to=\"/category\">Categories</Link></li>\r\n            </>\r\n        )\r\n    }\r\n\r\n    const loggedRouter = () => {\r\n        return(\r\n            <>\r\n               <li><Link to=\"/history\">Historique</Link></li>\r\n               <li><Link to=\"/\" onClick={logoutUser}>Se déconnecter</Link></li>\r\n\r\n            </>\r\n        )\r\n    }\r\n\r\n    const toggleMenuu = () => setMenu(!menu)\r\n\r\n    const styleMenu = {\r\n        left: menu ? 0 : \"-100%\"\r\n    }\r\n\r\n    return (\r\n        <header>\r\n\r\n            <div className =\"menu\" onClick= {() => setMenu(!menu)}>\r\n\r\n                < img src = {Menu} alt =\"\" width=\"30\" />\r\n\r\n            </div>\r\n\r\n            <div className=\"logo\">\r\n                <h1>\r\n                    <Link to=\"/\"> {isAdmin ? 'Admin' : 'UPEP Scoop Solidaire'}</Link>\r\n                </h1>\r\n                \r\n            </div>\r\n\r\n            <ul style={styleMenu}>\r\n                <li>\r\n                    <Link to=\"/\">{isAdmin ? 'Home' : 'Boutique'}</Link>\r\n                </li>\r\n\r\n                {isAdmin && adminRouter()}\r\n\r\n                {\r\n                    isLogged ? loggedRouter() :\r\n                    <li >\r\n                         <Link to=\"/login\">Se Connecter ✥ S'inscrire</Link>\r\n                    </li>\r\n                }              \r\n\r\n                <li onClick= {() => setMenu(!menu)}>\r\n                    <img src={Close} alt=\"\" width=\"30\" className=\"menu\"/>\r\n                </li>\r\n            </ul>\r\n\r\n            {\r\n              isAdmin ? '' \r\n              : <div className=\"cart-icon\">\r\n                <span>{cart.length}</span>\r\n                <Link to=\"/cart\">\r\n                <img src={Cart} alt=\"\" width=\"30\" />\r\n                </Link>\r\n              </div>\r\n            }\r\n                        \r\n        </header>\r\n    )\r\n}\r\n","import React, {useContext} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {GlobalState} from '../../../../GlobalState';\r\n\r\n\r\nfunction BtnRender({product, deleteProduct}) {\r\n    const state = useContext(GlobalState)\r\n    const [isAdmin] = state.userAPI.isAdmin\r\n    const addCart = state.userAPI.addCart\r\n\r\n    return (\r\n        <div className=\"row_btn\">\r\n            {\r\n                isAdmin ? \r\n             <>\r\n                <Link id=\"btn_buy\" to=\"#!\" \r\n                onClick={() =>deleteProduct(product._id, product.images.public_id)} >\r\n                    Supprimer\r\n                </Link>\r\n\r\n                <Link id=\"btn_view\" to={`/edit_product/${product._id}`}>\r\n                    Editer\r\n                </Link>\r\n             </>\r\n             : <>\r\n                <Link id=\"btn_buy\" to=\"#!\" onClick={() => addCart(product)}>\r\n                           Acheter\r\n                </Link>\r\n\r\n                <Link id=\"btn_view\" to={`/detail/${product._id}`}>\r\n                           voir\r\n                </Link>\r\n             </>\r\n\r\n            }\r\n\r\n                   \r\n              </div>\r\n    )\r\n}\r\n\r\nexport default BtnRender\r\n","import React from 'react'\r\nimport BtnRender from './BtnRender'\r\n\r\nfunction ProductItem({product, isAdmin, deleteProduct, handleCheck}) {        \r\n    return (\r\n        <div className=\"product_card\">\r\n            {\r\n                isAdmin && <input type=\"checkbox\" \r\n                checked={product.checked}\r\n                onChange= {() => handleCheck(product._id)}\r\n                />\r\n            }\r\n            \r\n            <img src={product.images.url} alt=\"\" />\r\n\r\n                  <div className=\"product_box\">\r\n                  <h2 title={product.title}>{product.title}</h2>\r\n                  <span>€{product.price}</span>\r\n                  <p>{product.description}</p>\r\n              </div>\r\n\r\n              <BtnRender product={product} deleteProduct={deleteProduct}/>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProductItem\r\n","import React from 'react';\r\nimport './loading.css';\r\n\r\nfunction Loading() {\r\n    return (\r\n        <div className=\"load-page\">\r\n            <div className=\"loader\">\r\n                <div>\r\n                    <div>\r\n                        <div>\r\n                            <div>\r\n                                <div>\r\n                                    <div>\r\n                                        <div>\r\n                                            <div></div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading\r\n","import React, { useContext } from 'react';\r\nimport {GlobalState} from '../../../GlobalState';\r\n\r\nexport default function Filters() {\r\n    const state = useContext(GlobalState)\r\n    const [categories] = state.categoriesAPI.categories\r\n\r\n    const [category, setCategory] = state.productsAPI.category\r\n    const [sort, setSort] = state.productsAPI.sort\r\n    const [search, setSearch] = state.productsAPI.search\r\n\r\n    const handleCategory = e => {\r\n        setCategory(e.target.value)\r\n        setSearch('')\r\n    }\r\n\r\n    return (\r\n        <div className=\"filter_menu\">\r\n            <div className=\"row\">\r\n                <span>Filtres:</span>\r\n                <select name=\"category\" value={category} onChange={handleCategory} >\r\n                    <option value=''>Tous les Produits</option>\r\n\r\n                     {\r\n                        categories.map(category => (\r\n                            <option value={\"category=\" + category._id} key={category._id}>\r\n                                {category.name}\r\n                            </option>\r\n                        ))\r\n                    }\r\n\r\n                </select>\r\n            </div>\r\n\r\n            <input type=\"text\" value={search} placeholder=\"Entrer votre recherche!\"\r\n            onChange = {e => setSearch(e.target.value.toLowerCase())} />\r\n\r\n            <div className=\"row sort\">\r\n                <span>Trier par:</span>\r\n                <select  value={sort} onChange={e => setSort(e.target.value)} >\r\n                    <option value=''>Le plus récent</option>\r\n                    <option value='sort=oldest'>Le plus ancien</option>\r\n                    <option value='sort=-sold'>Les meilleures ventes</option>\r\n                    <option value='sort=-price'>Prix:Le plus-bas</option>\r\n                    <option value='sort=price'>Prix:Le plus-haut</option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useContext} from 'react';\r\nimport {GlobalState} from '../../../GlobalState';\r\n\r\nexport default function LoadMore() {\r\n    const state = useContext(GlobalState)\r\n    const [page, setPage] = state.productsAPI.page\r\n    const [result] = state.productsAPI.result\r\n\r\n    return (\r\n        <div className=\"load_more\">\r\n            {\r\n                result <page*9 ? \"\" \r\n                : <button onClick={() => setPage(page+1)}>Charger plus</button>\r\n            }\r\n            \r\n        </div>\r\n    )\r\n}\r\n","import React, {useContext, useState} from 'react'\r\nimport {GlobalState} from '../../../GlobalState'\r\nimport ProductItem from '../utils/productItem/ProductItem'\r\nimport Loading from '../utils/loading/Loading';\r\nimport axios from 'axios';\r\nimport Filters from './Filters';\r\nimport LoadMore from './LoadMore';\r\n\r\n\r\n\r\nfunction Products() {\r\n    const state = useContext(GlobalState)\r\n    const [products, setProducts] = state.productsAPI.products \r\n    const [isAdmin] = state.userAPI.isAdmin\r\n   //console.log(state)\r\n    //console.log(products) \r\n    const [token] = state.token \r\n    const [callback, setCallback] = state.productsAPI.callback\r\n    const [loading, setLoading] = useState(false)\r\n    const [isCheck, setIsCheck] = useState(false)\r\n   \r\n    const handleCheck = (id) => {\r\n        //console.log(product.checked)\r\n        //product.checked = !product.checked\r\n       //console.log(id)\r\n       products.forEach(product => {\r\n           if(product._id === id) product.checked = !product.checked\r\n       })\r\n       setProducts([...products])\r\n    }\r\n\r\n    const checkAll = () => {\r\n        products.forEach(product => {\r\n            //product.checked = ! product.checked\r\n            product.checked = !isCheck\r\n        })\r\n        setProducts([...products])\r\n        setIsCheck(!isCheck)\r\n    }\r\n\r\n    const deleteAll = () => {\r\n        products.forEach(product => {\r\n            if(product.checked) deleteProduct(product._id, product.images.public_id)\r\n        })\r\n    }\r\n\r\n    const deleteProduct = async(id, public_id) => {        \r\n        //console.log(product)\r\n        //console.log(id, public_id)\r\n        try {\r\n            setLoading(true)\r\n            const destroyImg = await axios.post('/api/destroy', {public_id}, {\r\n                headers: {Authorization: token}\r\n            })\r\n            const deleteProduct = await axios.delete(`/api/products/${id}`, {\r\n                headers: {Authorization: token}\r\n            })\r\n\r\n            setCallback(!callback)\r\n            setLoading(false)            \r\n        } catch(err) {\r\n            alert(err.response.data.msg)\r\n        }\r\n\r\n    }\r\n   \r\n    if(loading) return <div><Loading /></div>\r\n    return (\r\n        <>\r\n        <Filters />\r\n        {\r\n            isAdmin &&\r\n            <div className=\"delete-all\">\r\n                <span>Tout séléctionner</span>\r\n                <input type=\"checkbox\" checked={isCheck} onChange={checkAll} />\r\n                <button onClick={deleteAll} >Tout supprimer</button>\r\n            </div>\r\n        }\r\n\r\n        <div className=\"products\">\r\n        {\r\n                products.map(product => {\r\n                    return <ProductItem key={product._id} product={product}\r\n                    isAdmin={isAdmin} deleteProduct={deleteProduct} handleCheck={handleCheck} />\r\n                })\r\n            } \r\n        </div>\r\n        \r\n        <LoadMore />\r\n        {products.length === 0 && <Loading />}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Products\r\n","import React, {useContext, useState, useEffect} from 'react'\r\nimport {useParams, Link} from 'react-router-dom'\r\nimport {GlobalState} from '../../../GlobalState'\r\nimport ProductItem from '../utils/productItem/ProductItem'\r\n\r\n\r\n\r\nfunction DetailProduct() {\r\n    const params = useParams()\r\n    const state = useContext(GlobalState)\r\n    const [products] = state.productsAPI.products\r\n    const addCart = state.userAPI.addCart\r\n    const [detailProduct, setDetailProduct] = useState([])\r\n\r\n    useEffect(() => {\r\n        console.log('re render')\r\n        if(params.id) {\r\n            products.forEach(product => {\r\n                if(product._id === params.id) setDetailProduct(product)\r\n            })\r\n        }\r\n    }, [params.id, products])\r\n    //console.log(detailProduct)\r\n\r\n    if(detailProduct.length === 0) return null;\r\n\r\n    return (\r\n\r\n    <>\r\n\r\n        <div className=\"detail\">\r\n            <img src={detailProduct.images.url} alt=\"\" />\r\n\r\n            <div className=\"box-detail\">\r\n\r\n                <div className=\"row\">\r\n                    <h2>{detailProduct.title}</h2>\r\n                    <h6>#id:{detailProduct.product_id}</h6>\r\n                </div>\r\n                \r\n                <span>€ {detailProduct.price}</span>\r\n                <p>{detailProduct.description}</p>\r\n                <p>{detailProduct.content}</p>\r\n                <p>Vente: {detailProduct.sold}</p>\r\n                <Link to=\"/cart\" className=\"cart\"\r\n                    onClick={() => addCart(detailProduct)}>\r\n                    Acheter maintenant\r\n                </Link>\r\n            </div>            \r\n        </div>\r\n          \r\n        <div>\r\n            <h2>Produits associés</h2>\r\n\r\n            <div  className=\"products\">\r\n\r\n                {\r\n                    products.map(product => {\r\n                        return product.category === detailProduct.category \r\n                              ? <ProductItem key={product._id} product = {product} /> : null\r\n                    })\r\n                }\r\n\r\n            </div>\r\n        </div>\r\n        \r\n\r\n    </>\r\n  )\r\n}\r\n\r\nexport default DetailProduct\r\n","import React, {useState} from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nfunction Login() {\r\n    const [user, setUser] = useState({\r\n        email:'', password: ''\r\n    })  \r\n    \r\n    const onChangeInput = e => {\r\n        const {name, value} = e.target;\r\n        setUser({...user, [name]:value})\r\n    }\r\n\r\n    const loginSubmit = async e => {\r\n        e.preventDefault()\r\n        try {\r\n            await axios.post('/user/login', {...user})\r\n            localStorage.setItem('firstLogin', true)            \r\n            window.location.href = \"/\";\r\n        } catch (err) {\r\n            alert(err.response.data.msg)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"login-page\">\r\n            <form onSubmit={loginSubmit}>\r\n                <h2>Connexion</h2>\r\n                <input type=\"email\" name=\"email\" required\r\n                placeholder=\"Email\" value={user.email} onChange={onChangeInput} />\r\n\r\n                <input type=\"password\" name=\"password\" required autoComplete=\"on\"\r\n                placeholder=\"Mot de passe\" value={user.password} onChange={onChangeInput} />\r\n\r\n                <div className=\"row\">\r\n                    <button type=\"submit\">Connexion</button>\r\n                    <Link to=\"/register\">S'inscrire</Link>\r\n                </div>\r\n\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React, {useState} from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nfunction Register() {\r\n    const [user, setUser] = useState({\r\n       name:'', email:'', password: ''\r\n    })  \r\n    \r\n    const onChangeInput = e => {\r\n        const {name, value} = e.target;\r\n        setUser({...user, [name]:value})\r\n    }\r\n\r\n    const registerSubmit = async e => {\r\n        e.preventDefault()\r\n        try {\r\n            await axios.post('/user/register', {...user})\r\n            localStorage.setItem('firstLogin', true)            \r\n            window.location.href = \"/\";\r\n        } catch (err) {\r\n            alert(err.response.data.msg)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"login-page\">\r\n            <form onSubmit={registerSubmit}>\r\n            {/* <h2>Register</h2>  */} \r\n\r\n            <input type=\"text\" name=\"name\" required\r\n                placeholder=\"Name\" value={user.name} onChange={onChangeInput} />\r\n\r\n            <input type=\"email\" name=\"email\" required\r\n                placeholder=\"Email\" value={user.email} onChange={onChangeInput} />\r\n\r\n            <input type=\"password\" name=\"password\" required autoComplete=\"on\"\r\n                placeholder=\"Password\" value={user.password} onChange={onChangeInput} />\r\n\r\n            <div className=\"row\">\r\n                    <button type=\"submit\">Register</button>\r\n                    <Link to=\"/login\">Login</Link>\r\n            </div>\r\n\r\n        </form>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Register\r\n","import React from 'react';\r\nimport PaypalExpressBtn from 'react-paypal-express-checkout';\r\n \r\nexport default class PaypalButton extends React.Component {\r\n    render() {\r\n        const onSuccess = (payment) => {\r\n            // Congratulation, it came here means everything's fine!\r\n            \t\tconsole.log(\"The payment was succeeded!\", payment);\r\n            \t\t// You can bind the \"payment\" object's value to your state or props or whatever here, please see below for sample returned data\r\n\r\n                    this.props.tranSuccess(payment)\r\n        }\r\n \r\n        const onCancel = (data) => {\r\n            // User pressed \"cancel\" or close Paypal's popup!\r\n            console.log('The payment was cancelled!', data);\r\n            // You can bind the \"data\" object's value to your state or props or whatever here, please see below for sample returned data\r\n        }\r\n \r\n        const onError = (err) => {\r\n            // The main Paypal's script cannot be loaded or somethings block the loading of that script!\r\n            console.log(\"Error!\", err);\r\n            // Because the Paypal's main script is loaded asynchronously from \"https://www.paypalobjects.com/api/checkout.js\"\r\n            // => sometimes it may take about 0.5 second for everything to get set, or for the button to appear\r\n        }\r\n \r\n        let env = 'sandbox'; // you can set here to 'production' for production\r\n        let currency = 'USD'; // or you can set this value from your props or state\r\n        let total = this.props.total; // same as above, this is the total amount (based on currency) to be paid by using Paypal express checkout\r\n        // Document on Paypal's currency code: https://developer.paypal.com/docs/classic/api/currency_codes/\r\n \r\n        const client = {\r\n            sandbox:    'AR9gyuAV_YbUvaTQQUFjixTStZXh0A53kNHBKSOgIKakcqWzzFGPMkCpZqyWblqP6Crbl3g2YDtVuqX-',\r\n            production: 'YOUR-PRODUCTION-APP-ID',\r\n        }\r\n        // In order to get production's app-ID, you will have to send your app to Paypal for approval first\r\n        // For sandbox app-ID (after logging into your developer account, please locate the \"REST API apps\" section, click \"Create App\"):\r\n        //   => https://developer.paypal.com/docs/classic/lifecycle/sb_credentials/\r\n        // For production app-ID:\r\n        //   => https://developer.paypal.com/docs/classic/lifecycle/goingLive/\r\n \r\n        // NB. You can also have many Paypal express checkout buttons on page, just pass in the correct amount and they will work!\r\n        let style = {\r\n            size: 'small',\r\n            color: 'blue',\r\n            shape: 'rect',\r\n            label: 'checkout',\r\n            tagline: false\r\n        }\r\n\r\n        return (\r\n            <PaypalExpressBtn \r\n            env={env} client={client} \r\n            currency={currency} \r\n            total={total} onError={onError} \r\n            onSuccess={onSuccess} onCancel={onCancel} \r\n            style={style} />\r\n        );\r\n    }\r\n}","import React, {useContext, useState, useEffect} from 'react';\r\nimport {GlobalState} from '../../../GlobalState';\r\nimport {Link} from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport  PaypalButton from './PaypalButton';\r\n\r\nfunction Cart() {\r\n    const state = useContext(GlobalState)\r\n    const [cart, setCart] = state.userAPI.cart\r\n    const [total, setTotal] = useState(0)\r\n    const [token] = state.token\r\n   \r\n\r\n    useEffect(() =>{\r\n        const getTotal = () =>{\r\n            const total = cart.reduce((prev, item) => {\r\n                return prev + (item.price * item.quantity)\r\n            },0)\r\n\r\n            setTotal(total)\r\n        }\r\n\r\n        getTotal()\r\n\r\n    },[cart])\r\n\r\n    const addToCart = async (cart) =>{\r\n        await axios.patch('/user/addcart', {cart}, {\r\n            headers: {Authorization: token}\r\n        })\r\n    }\r\n\r\n    const increment = (id) =>{\r\n        cart.forEach(item => {\r\n            if(item._id === id){\r\n                item.quantity += 1\r\n            }\r\n        })\r\n\r\n        setCart([...cart])\r\n        addToCart(cart)\r\n    }\r\n\r\n    const decrement = (id) =>{\r\n        cart.forEach(item => {\r\n            if(item._id === id){\r\n                item.quantity === 1 ? item.quantity = 1 : item.quantity -= 1\r\n            }\r\n        })\r\n\r\n        setCart([...cart])\r\n        addToCart(cart)\r\n    }\r\n\r\n     const removeProduct = id =>{\r\n        if(window.confirm(\"Voulez-vous supprimer ce produit?\")){\r\n            cart.forEach((item, index) => {\r\n                if(item._id === id){\r\n                    cart.splice(index, 1)\r\n                }\r\n            })\r\n\r\n            setCart([...cart])\r\n            addToCart(cart)\r\n        }\r\n    }\r\n\r\n    const tranSuccess = async(payment) => {\r\n        //console.log(payment)\r\n         const {paymentID, address} = payment;\r\n\r\n        await axios.post('/api/payment', {cart, paymentID, address}, {\r\n            headers: {Authorization: token} \r\n        })\r\n\r\n        setCart([])\r\n        addToCart([])\r\n        alert(\"Vous avez passé une commande avec succès.\") \r\n        \r\n    }\r\n\r\n    if(cart.length === 0) \r\n        return <h2 style={{textAlign: \"center\", fontSize: \"5rem\"}}>panier vide</h2> \r\n    return (\r\n        <div>\r\n            {\r\n                cart.map(product => (\r\n                  <div className=\"detail cart\" key={product._id}>\r\n                    <img src={product.images.url} alt=\"\" />\r\n        \r\n                       <div className=\"box-detail\">\r\n                            <h2>{product.title}</h2>                                  \r\n                            <h3>€ {product.price * product.quantity}</h3>\r\n                            <p>{product.description}</p>\r\n                            <p>{product.content}</p>\r\n                            <p>vente: {product.sold}</p>\r\n\r\n                            <div className=\"amount\">\r\n                                <button onClick={() => decrement(product._id)} > - </button>\r\n                                <span>{product.quantity}</span>\r\n                                <button onClick={() => increment(product._id)} > + </button>\r\n                            </div>\r\n\r\n                            <div className=\"delete\" \r\n                                onClick= { () => removeProduct(product._id) } >\r\n                                 X\r\n                            </div>\r\n                       </div>            \r\n                  </div>\r\n                ))\r\n            }\r\n\r\n            <div className=\"total\">\r\n              <h3>Total: € {total} </h3> \r\n              {/* <Link to=\"#!\">Paiement</Link> */}\r\n              <PaypalButton \r\n              total={total}\r\n              tranSuccess={tranSuccess} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Cart\r\n","import React from 'react'\r\n\r\nfunction NotFound() {\r\n    return (\r\n        <div>\r\n            404 | Not Found\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NotFound\r\n","import React, {useContext, useEffect} from 'react';\r\nimport {GlobalState} from '../../../GlobalState';\r\nimport {Link} from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\n\r\nfunction OrderHistory() {\r\n    const state = useContext(GlobalState)\r\n    const [history, setHistory] = state.userAPI.history\r\n    const [isAdmin] = state.userAPI.isAdmin\r\n    const [token] = state.token\r\n\r\n    useEffect(() => {\r\n        if(token){\r\n            const getHistory = async() =>{\r\n                if(isAdmin){\r\n                    const res = await axios.get('/api/payment', {\r\n                        headers: {Authorization: token}\r\n                    })\r\n                    setHistory(res.data)\r\n                }else{\r\n                    const res = await axios.get('/user/history', {\r\n                        headers: {Authorization: token}\r\n                    })\r\n                    setHistory(res.data)\r\n                }\r\n            }\r\n            getHistory()\r\n        }\r\n    },[token, isAdmin, setHistory])\r\n\r\n    return (\r\n        <div className=\"history-page\">\r\n            <h2>History</h2> \r\n\r\n            <h4>Vous avez commandé {history.length}</h4>\r\n\r\n            <table >\r\n                <thead>\r\n                    <tr>\r\n                        <th>Payment ID</th>\r\n                        <th>Date d'achat</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        history.map(items => (\r\n                            <tr key={items._id}>\r\n                                <td>{items.paymentID}</td>\r\n                                <td>{new Date(items.createdAt).toLocaleDateString()}</td>\r\n                                <td><Link to={`/history/${items._id}`}>Voir</Link></td>\r\n                            </tr>\r\n                        ))\r\n                    }\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OrderHistory\r\n","import React, {useState, useEffect, useContext} from 'react';\r\nimport {useParams} from 'react-router-dom'\r\nimport {GlobalState} from '../../../GlobalState'\r\n\r\n\r\nexport default function OrderDetails() {\r\n    const state = useContext(GlobalState)\r\n    const [history] = state.userAPI.history\r\n    const [orderDetails, setOrderDetails] = useState([])\r\n\r\n    const params = useParams()\r\n\r\n    useEffect(() => {\r\n        if(params.id){\r\n            history.forEach(item =>{\r\n                if(item._id === params.id) setOrderDetails(item)\r\n            })\r\n        }\r\n    },[params.id, history])\r\n\r\n    console.log(orderDetails)\r\n    if(orderDetails.length === 0) return null;\r\n    return (\r\n        <div className=\"history-page\">\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Name</th>\r\n                        <th>Address</th>\r\n                        <th>Postal Code</th>\r\n                        <th>Country Code</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                         <td>{orderDetails.address.recipient_name}</td>\r\n                        <td>{orderDetails.address.line1 + \" - \" + orderDetails.address.city}</td>\r\n                        <td>{orderDetails.address.postal_code}</td>\r\n                        <td>{orderDetails.address.country_code}</td>  \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n              <table style={{margin: \"30px 0px\"}}>\r\n                <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>Products</th>\r\n                        <th>Quantity</th>\r\n                        <th>Price</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        orderDetails.cart.map(item =>(\r\n                        <tr key={item._id}>\r\n                            <td><img src={item.images.url} alt=\"\" /></td>\r\n                            <td>{item.title}</td>\r\n                            <td>{item.quantity}</td>\r\n                            <td>€ {item.price * item.quantity}</td>\r\n                        </tr>\r\n                        ))\r\n                    }\r\n                    \r\n                </tbody>\r\n            </table>  \r\n        </div>\r\n    )\r\n}\r\n","\r\nimport React, {useState, useContext} from 'react'\r\nimport {GlobalState} from '../../../GlobalState';\r\nimport axios from 'axios';\r\n\r\n\r\nexport default function Categories() {\r\n    const state = useContext(GlobalState)\r\n    const [categories] = state.categoriesAPI.categories\r\n    const [category, setCategory] = useState('')\r\n    const [token] = state.token\r\n    const [callback, setCallback] = state.categoriesAPI.callback\r\n    const [onEdit, setOnEdit] = useState(false)\r\n    const [id, setID] = useState('')\r\n\r\n\r\n    const createCategory = async (e) => {\r\n        e.preventDefault()\r\n        try {\r\n            if(onEdit) {\r\n            const res = await axios.put(`/api/category/${id}`, {name:category}, {\r\n                headers: {Authorization: token}\r\n            })            \r\n            alert(res.data.msg)  \r\n            \r\n        } else {\r\n            const res = await axios.post('/api/category/', {name:category}, {\r\n                headers: {Authorization: token}\r\n            })\r\n            alert(res.data.msg) \r\n        }\r\n        setOnEdit(false)\r\n        setCallback(!callback)\r\n            //nettoyer après l'enregistrement\r\n        setCategory('') \r\n\r\n        } catch(err) {\r\n            alert(err.response.data.msg)\r\n        }\r\n    }\r\n\r\n    const editCategory = async (id, name) =>{\r\n        setID(id)\r\n        setCategory(name)\r\n        setOnEdit(true)\r\n    }\r\n\r\n    const deleteCategory = async(id) => {\r\n        try {\r\n            const res = await axios.delete(`/api/category/${id}`, {\r\n                headers: {Authorization: token}\r\n            })\r\n            alert(res.data.msg)\r\n            setCallback(!callback)\r\n\r\n        } catch(err) {\r\n            alert(err.response.msg)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"categories\">\r\n             <form onSubmit= {createCategory} >\r\n                <label htmlFor=\"category\">Catégorie</label>\r\n                <input type=\"text\" name=\"category\" \r\n                value={category} required\r\n                onChange={e => setCategory(e.target.value)} />\r\n\r\n                <button type=\"submit\">{onEdit? \"Mettre à jour\" : \"Créer\"}</button>\r\n            </form>\r\n\r\n            <div className=\"col\">\r\n                {\r\n                   categories.map(category => (\r\n                    <div className=\"row\" key={category._id}>\r\n                        <p>{category.name}</p>\r\n                        <div>\r\n                            <button onClick={() => editCategory(category._id, category.name)} >Editer</button>\r\n                            <button onClick={() => deleteCategory(category._id)} >Supprimer</button>\r\n                        </div>\r\n                    </div>\r\n                ))  \r\n                }\r\n\r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n","import React, {useState, useContext, useEffect} from 'react';//, useEffect\r\nimport axios from 'axios';\r\nimport {GlobalState} from '../../../GlobalState';\r\nimport Loading from '../utils/loading/Loading';\r\nimport {useHistory, useParams} from 'react-router-dom';\r\n\r\n\r\nconst initialState = {\r\n    product_id: '',\r\n    title: '',\r\n    price: 0,\r\n    description: 'Effet CSS sympa, idées de conception Web, bibliothèques JavaScript, Nodejs',\r\n    content: 'Bienvenue sur notre site UPEP Scoop Solidaire, la conception UI / UX, les animations css et les effets css.',\r\n    category: '',\r\n    id: ''\r\n}\r\n\r\nexport default function CreateProduct() {\r\n    const state = useContext(GlobalState)\r\n    const [product, setProduct] = useState(initialState)\r\n    const [categories] = state.categoriesAPI.categories\r\n    const [images, setImages] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n    \r\n    const [isAdmin] = state.userAPI.isAdmin\r\n    const [token] = state.token\r\n    const history = useHistory()\r\n    const param = useParams()\r\n\r\n    const [products] = state.productsAPI.products\r\n    const [onEdit, setOnEdit] = useState(false)\r\n    const [callback, setCallback] = state.productsAPI.callback\r\n\r\n    useEffect(() => {\r\n        if(param.id) {\r\n            setOnEdit(true)\r\n            products.forEach(product => {\r\n                if(product._id === param.id){\r\n                    setProduct(product)\r\n                    setImages(product.images)\r\n                }\r\n                \r\n            })            \r\n        } else {\r\n            setProduct(initialState)\r\n            setImages(false)\r\n            setOnEdit(false)\r\n        }\r\n    }, [param.id, products])\r\n\r\n    const handleUpload = async(e) => {\r\n        e.preventDefault()\r\n        try {\r\n\r\n            if(!isAdmin) return alert(\"vous n'êtes pas un Admin\")\r\n            const file = e.target.files[0]\r\n           // console.log(file)\r\n           if(!file) return alert(\"Le fichier n'existe pas.\")\r\n\r\n           if(file.size > 1024 * 1024) // 1mb\r\n                return alert(\"Le fichier ne doit pas dépasser 1G!\")\r\n\r\n           if(file.type !== 'image/jpeg' && file.type !== 'image/png') // 1mb\r\n                return alert(\"Le format du fichier est incorrect.\")\r\n\r\n           let formData = new FormData()\r\n           formData.append('file', file)\r\n\r\n           setLoading(true)\r\n           const res = await axios.post('/api/upload', formData, {\r\n            headers: {'content-type': 'multipart/form-data', Authorization: token}\r\n        })\r\n        setLoading(false)\r\n        //console.log(res)\r\n        setImages(res.data)\r\n\r\n        } catch (err) {\r\n            alert(err.response.data.msg)\r\n        }\r\n    }\r\n\r\n    const handleDestroy = async e => {\r\n        try {\r\n           if(!isAdmin) return alert(\"vous n'êtes pas un Admin\")\r\n           setLoading(true)\r\n           await axios.post('/api/destroy', {public_id: images.public_id}, {\r\n               headers: {Authorization: token}  \r\n           })\r\n           \r\n           setLoading(false)\r\n           setImages(false)\r\n        }   catch(err) {\r\n            alert(err.response.data.msg)\r\n        }  \r\n       }\r\n\r\n    const handleChangeInput = e =>{\r\n        const {name, value} = e.target\r\n        setProduct({...product, [name]:value})\r\n    }\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault()\r\n\r\n        try {\r\n            if(!isAdmin) return alert(\"vous n'êtes pas un Admin\")\r\n            if(!images) return alert(\"Image non chargée\")\r\n\r\n            if(onEdit){\r\n                await axios.put(`/api/products/${product._id}`, {...product, images}, {\r\n                    headers: {Authorization: token}\r\n                })\r\n            }else{\r\n                await axios.post('/api/products', {...product, images}, {\r\n                    headers: {Authorization: token}\r\n                })\r\n            }\r\n\r\n            //setImages(false) car il y a setCallback\r\n            setProduct(initialState)\r\n            history.push(\"/\")\r\n            setCallback(!callback)\r\n        } catch(err) {\r\n            alert(err.response.data.msg)\r\n        }\r\n    }     \r\n\r\n    const styleUpload = {\r\n        display: images ? \"block\" : \"none\"\r\n    }\r\n    \r\n\r\n    return (\r\n        <div className=\"create_product\">\r\n            <div className=\"upload\"> \r\n            <input type=\"file\" name=\"file\" id=\"file_up\" onChange={handleUpload} />\r\n\r\n            {\r\n                 loading ? <div id=\"file_img\"><Loading /></div>\r\n\r\n                 : <div id=\"file_img\" style={styleUpload}>\r\n\r\n                 <img  src={images ? images.url : ''} alt=\"\"/>\r\n                 <span onClick={handleDestroy}>X</span> \r\n              </div>  \r\n            }\r\n           \r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} >\r\n                <div className=\"row\">\r\n                   <label htmlFor=\"product_id\">Product ID</label>\r\n                   <input type=\"text\" name=\"product_id\" id=\"product_id\"\r\n                    required value={product.product_id} onChange={handleChangeInput} disabled={onEdit} />\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                   <label htmlFor=\"title\">Titre</label>\r\n                   <input type=\"text\" name=\"title\" id=\"title\" required\r\n                    value={product.title} onChange={handleChangeInput}  />\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                   <label htmlFor=\"price\">Prix</label>\r\n                   <input type=\"number\" name=\"price\" id=\"price\" required\r\n                    value={product.price} onChange={handleChangeInput} />\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                   <label htmlFor=\"description\">Description</label>\r\n                   <textarea type=\"text\" name=\"description\" id=\"description\" required\r\n                    value={product.description} rows=\"5\" onChange={handleChangeInput} />\r\n                </div>\r\n\r\n                  <div className=\"row\">\r\n                    <label htmlFor=\"content\">A propos</label>\r\n                    <textarea type=\"text\" name=\"content\" id=\"content\" required\r\n                    value={product.content} rows=\"7\" onChange={handleChangeInput} />\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                <label htmlFor=\"categories\">Categories:</label>\r\n                <select name=\"category\" value={product.category} onChange={handleChangeInput} >\r\n                    <option value=\"\">Veuillez sélectionner une catégorie</option>\r\n                    {\r\n                        categories.map(category => (\r\n                            <option value={category._id} key={category._id} >\r\n                                {category.name}\r\n                            </option>\r\n                        ))\r\n                    }\r\n                </select>\r\n                </div>\r\n                \r\n                <button type=\"submit\">Créer </button>\r\n            </form>\r\n            \r\n        </div>\r\n    )\r\n}\r\n","import React, {useContext} from 'react';\r\nimport {Switch, Route} from 'react-router-dom'\r\nimport Products from './products/Products'\r\nimport DetailProduct from './detailProduct/DetailProduct'\r\nimport Login from './auth/Login'\r\nimport Register from './auth/Register'\r\nimport Cart from './cart/Cart'\r\nimport NotFound from './utils/not_found/NotFound'\r\nimport {GlobalState} from '../../GlobalState';\r\nimport OrderHistory from './history/OrderHistory';\r\nimport OrderDetails from './history/OrderDetails';\r\nimport Categories from './categories/Categories';\r\nimport CreateProduct from './createProduct/CreateProduct';\r\n\r\n\r\nfunction Pages() {\r\n  const state = useContext(GlobalState)\r\n  const [isLogged] = state.userAPI.isLogged\r\n  const [isAdmin] = state.userAPI.isAdmin\r\n\r\n    return (\r\n        <div>\r\n             <Switch>\r\n\r\n               <Route path=\"/\" exact component= {Products} />\r\n               <Route path=\"/detail/:id\" exact component= {DetailProduct} />\r\n              \r\n               <Route path=\"/login\" exact component= {isLogged ? NotFound : Login} />\r\n               <Route path=\"/register\" exact component= {isLogged ? NotFound : Register} />\r\n               \r\n               <Route path=\"/cart\" exact component= {Cart} />\r\n\r\n               <Route path=\"/history\" exact component={isLogged ? OrderHistory : NotFound} />\r\n               <Route path=\"/history/:id\" exact component={isLogged ? OrderDetails : NotFound} />\r\n\r\n               <Route path=\"/category\" exact component={isAdmin ? Categories : NotFound} />\r\n               <Route path=\"/create_product\" exact component={isAdmin ? CreateProduct : NotFound} />\r\n               <Route path=\"/edit_product/:id\" exact component={isAdmin ? CreateProduct : NotFound} />\r\n\r\n\r\n\r\n               <Route path=\"*\" exact component= {NotFound} />\r\n\r\n                 \r\n             </Switch>  \r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Pages\r\n","import React from 'react';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport {DataProvider} from './GlobalState';\nimport Header from './components/headers/Header';\nimport MainPages from './components/mainpages/Pages';\n\n\nfunction App() {\n\n  return (\n    <DataProvider>\n\n      <Router>\n            <div className=\"App\">\n                 <Header /> \n                 <MainPages />  \n            </div>\n\n      </Router>\n\n    </DataProvider>\n      \n\n    \n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(<App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}